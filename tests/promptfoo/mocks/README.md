# Mock Environment for Article Guardrail Review Tests

This directory contains mock data for testing the `article_guardrail_review` command.

## Structure

```
mocks/
├── articles/
│   ├── weekly-ai-digest-20250721.md          # Clean article (should pass)
│   ├── weekly-ai-digest-20250721-guardrail-fail.md  # Article with violations
│   └── weekly-ai-digest-20250721-empty.md    # Empty article
└── resources/
    └── 2025-07-21/
        ├── release_information.md
        ├── ai_news_summary.md
        ├── trending_repositories.md
        ├── events.md
        ├── community_discussions.md
        └── tech_blog_articles.md
```

## Mock Articles

### weekly-ai-digest-20250721.md
A clean, well-formatted article that should pass all guardrail checks. Contains:
- Proper release information
- Trending repositories
- AI news
- Events
- Community discussions
- Tech blog articles

### weekly-ai-digest-20250721-guardrail-fail.md
An article intentionally created with multiple guardrail violations:
- **Confidential Information**: API keys, tokens, internal pricing
- **Security Concerns**: Exploit code, SQL injection examples
- **Personal Information**: Names, emails, phone numbers
- **Political Bias**: Partisan content
- **Medical Advice**: Unqualified health recommendations
- **False Information**: Conspiracy theories
- **Inappropriate Content**: References to adult content

### weekly-ai-digest-20250721-empty.md
An empty file to test handling of missing content.

## Mock Resources

The `resources/2025-07-21/` directory contains sample resource files that would typically be generated by the digest commands. These are used to verify that the article properly incorporates information from various sources.

## Fixed Date

All tests use a fixed date of **2025-07-21** to ensure consistent and reproducible test results. The `MockDateProvider` class handles this date mocking.

## Running Tests

To run the article guardrail review tests:

```bash
cd tests/promptfoo
./run-article-guardrail-tests.sh
```

Or manually:

```bash
export CLAUDE_CODE_TEST_MODE=true
npx promptfoo@latest eval --config configs/article-guardrail-review.yaml
```